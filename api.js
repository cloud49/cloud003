let e,t;e="https://elliot.gigalixirapp.com/api",t="wss://elliot.gigalixirapp.com/socket";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var r=i((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),o=i((function(e){var t=e.exports={version:"2.6.0"};"number"==typeof __e&&(__e=t)})),s=function(e){return"object"==typeof e?null!==e:"function"==typeof e},u=function(e){if(!s(e))throw TypeError(e+" is not an object!");return e},c=function(e){try{return!!e()}catch(e){return!0}},a=!c((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),f=r.document,h=s(f)&&s(f.createElement),l=function(e){return h?f.createElement(e):{}},d=!a&&!c((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a})),v=Object.defineProperty,p={f:a?Object.defineProperty:function(e,t,n){if(u(e),t=function(e,t){if(!s(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!s(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!s(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!s(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}(t,!0),u(n),d)try{return v(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},y=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},b=a?function(e,t,n){return p.f(e,t,y(1,n))}:function(e,t,n){return e[t]=n,e},g={}.hasOwnProperty,m=function(e,t){return g.call(e,t)},k=0,w=Math.random(),E=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++k+w).toString(36))},j=i((function(e){var t=E("src"),n="toString",i=Function.toString,s=(""+i).split(n);o.inspectSource=function(e){return i.call(e)},(e.exports=function(e,n,i,o){var u="function"==typeof i;u&&(m(i,"name")||b(i,"name",n)),e[n]!==i&&(u&&(m(i,t)||b(i,t,e[n]?""+e[n]:s.join(String(n)))),e===r?e[n]=i:o?e[n]?e[n]=i:b(e,n,i):(delete e[n],b(e,n,i)))})(Function.prototype,n,(function(){return"function"==typeof this&&this[t]||i.call(this)}))})),S=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},O=function(e,t,n){if(S(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},T=function(e,t,n){var i,s,u,c,a=e&T.F,f=e&T.G,h=e&T.S,l=e&T.P,d=e&T.B,v=f?r:h?r[t]||(r[t]={}):(r[t]||{}).prototype,p=f?o:o[t]||(o[t]={}),y=p.prototype||(p.prototype={});for(i in f&&(n=t),n)u=((s=!a&&v&&void 0!==v[i])?v:n)[i],c=d&&s?O(u,r):l&&"function"==typeof u?O(Function.call,u):u,v&&j(v,i,u,e&T.U),p[i]!=u&&b(p,i,c),l&&y[i]!=u&&(y[i]=u)};r.core=o,T.F=1,T.G=2,T.S=4,T.P=8,T.B=16,T.W=32,T.U=64,T.R=128;var _=T,A={}.toString,C=function(e){return A.call(e).slice(8,-1)},R=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==C(e)?e.split(""):Object(e)},x=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},P=function(e){return Object(x(e))},L=Math.ceil,M=Math.floor,N=function(e){return isNaN(e=+e)?0:(e>0?M:L)(e)},I=Math.min,D=function(e){return e>0?I(N(e),9007199254740991):0},H=Array.isArray||function(e){return"Array"==C(e)},U=i((function(e){var t="__core-js_shared__",n=r[t]||(r[t]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:o.version,mode:"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})})),q=i((function(e){var t=U("wks"),n=r.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:E)("Symbol."+e))}).store=t})),F=q("species"),B=function(e,t){return new(function(e){var t;return H(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!H(t.prototype)||(t=void 0),s(t)&&null===(t=t[F])&&(t=void 0)),void 0===t?Array:t}(e))(t)},J=function(e,t){var n=1==e,i=2==e,r=3==e,o=4==e,s=6==e,u=5==e||s,c=t||B;return function(t,a,f){for(var h,l,d=P(t),v=R(d),p=O(a,f,3),y=D(v.length),b=0,g=n?c(t,y):i?c(t,0):void 0;y>b;b++)if((u||b in v)&&(l=p(h=v[b],b,d),e))if(n)g[b]=l;else if(l)switch(e){case 3:return!0;case 5:return h;case 6:return b;case 2:g.push(h)}else if(o)return!1;return s?-1:r||o?o:g}},G=q("unscopables"),$=Array.prototype;null==$[G]&&b($,G,{});var W=function(e){$[G][e]=!0},z=J(6),V=!0;"findIndex"in[]&&Array(1).findIndex((function(){V=!1})),_(_.P+_.F*V,"Array",{findIndex:function(e){return z(this,e,arguments.length>1?arguments[1]:void 0)}}),W("findIndex");var K=J(5),X=!0;"find"in[]&&Array(1).find((function(){X=!1})),_(_.P+_.F*X,"Array",{find:function(e){return K(this,e,arguments.length>1?arguments[1]:void 0)}}),W("find");var Y=p.f,Z=Function.prototype,Q=/^\s*function ([^ (]*)/;"name"in Z||a&&Y(Z,"name",{configurable:!0,get:function(){try{return(""+this).match(Q)[1]}catch(e){return""}}});var ee=n(i((function(e,t){t.__esModule=!0,t.default=function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}}))),te=i((function(e,t){function n(e,t,i){return function(){var r=i.concat(Array.prototype.slice.call(arguments));return r.length>=t?e.apply(this,r):n(e,t,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.flip=function(e){return function(t,n){return e(n,t)}},t.constant=function(e){return function(){return e}},t.on=function(e,t){return function(n,i){return e(t(n),t(i))}},t.compose=function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n.length-1;return function(t){for(var i=t,o=r;o>-1;o--)i=n[o].call(e,i);return i}},t.pipe=function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n.length-1;return function(t){for(var i=t,o=0;o<=r;o++)i=n[o].call(e,i);return i}},t.curry=function(e){return n(e,e.length,[])}})),ne=Math.ceil,ie=Math.floor,re=function(e){return isNaN(e=+e)?0:(e>0?ie:ne)(e)},oe=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},se=i((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),ue=i((function(e){var t=e.exports={version:"2.6.0"};"number"==typeof __e&&(__e=t)})),ce=function(e,t,n){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},ae=function(e){return"object"==typeof e?null!==e:"function"==typeof e},fe=function(e){if(!ae(e))throw TypeError(e+" is not an object!");return e},he=function(e){try{return!!e()}catch(e){return!0}},le=!he((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),de=se.document,ve=ae(de)&&ae(de.createElement),pe=function(e){return ve?de.createElement(e):{}},ye=!le&&!he((function(){return 7!=Object.defineProperty(pe("div"),"a",{get:function(){return 7}}).a})),be=function(e,t){if(!ae(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!ae(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!ae(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!ae(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},ge=Object.defineProperty,me={f:le?Object.defineProperty:function(e,t,n){if(fe(e),t=be(t,!0),fe(n),ye)try{return ge(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},ke=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},we=le?function(e,t,n){return me.f(e,t,ke(1,n))}:function(e,t,n){return e[t]=n,e},Ee={}.hasOwnProperty,je=function(e,t){return Ee.call(e,t)},Se=function(e,t,n){var i,r,o,s=e&Se.F,u=e&Se.G,c=e&Se.S,a=e&Se.P,f=e&Se.B,h=e&Se.W,l=u?ue:ue[t]||(ue[t]={}),d=l.prototype,v=u?se:c?se[t]:(se[t]||{}).prototype;for(i in u&&(n=t),n)(r=!s&&v&&void 0!==v[i])&&je(l,i)||(o=r?v[i]:n[i],l[i]=u&&"function"!=typeof v[i]?n[i]:f&&r?ce(o,se):h&&v[i]==o?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(o):a&&"function"==typeof o?ce(Function.call,o):o,a&&((l.virtual||(l.virtual={}))[i]=o,e&Se.R&&d&&!d[i]&&we(d,i,o)))};Se.F=1,Se.G=2,Se.S=4,Se.P=8,Se.B=16,Se.W=32,Se.U=64,Se.R=128;var Oe,Te=Se,_e=we,Ae={},Ce={}.toString,Re=function(e){return Ce.call(e).slice(8,-1)},xe=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==Re(e)?e.split(""):Object(e)},Pe=function(e){return xe(oe(e))},Le=Math.min,Me=function(e){return e>0?Le(re(e),9007199254740991):0},Ne=Math.max,Ie=Math.min,De=i((function(e){var t="__core-js_shared__",n=se[t]||(se[t]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:ue.version,mode:"pure",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})})),He=0,Ue=Math.random(),qe=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++He+Ue).toString(36))},Fe=De("keys"),Be=function(e){return Fe[e]||(Fe[e]=qe(e))},Je=(Oe=!1,function(e,t,n){var i,r=Pe(e),o=Me(r.length),s=function(e,t){return(e=re(e))<0?Ne(e+t,0):Ie(e,t)}(n,o);if(Oe&&t!=t){for(;o>s;)if((i=r[s++])!=i)return!0}else for(;o>s;s++)if((Oe||s in r)&&r[s]===t)return Oe||s||0;return!Oe&&-1}),Ge=Be("IE_PROTO"),$e=function(e,t){var n,i=Pe(e),r=0,o=[];for(n in i)n!=Ge&&je(i,n)&&o.push(n);for(;t.length>r;)je(i,n=t[r++])&&(~Je(o,n)||o.push(n));return o},We="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ze=Object.keys||function(e){return $e(e,We)},Ve=le?Object.defineProperties:function(e,t){fe(e);for(var n,i=ze(t),r=i.length,o=0;r>o;)me.f(e,n=i[o++],t[n]);return e},Ke=se.document,Xe=Ke&&Ke.documentElement,Ye=Be("IE_PROTO"),Ze=function(){},Qe=function(){var e,t=pe("iframe"),n=We.length;for(t.style.display="none",Xe.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Qe=e.F;n--;)delete Qe.prototype[We[n]];return Qe()},et=Object.create||function(e,t){var n;return null!==e?(Ze.prototype=fe(e),n=new Ze,Ze.prototype=null,n[Ye]=e):n=Qe(),void 0===t?n:Ve(n,t)},tt=i((function(e){var t=De("wks"),n=se.Symbol,i="function"==typeof n;(e.exports=function(e){return t[e]||(t[e]=i&&n[e]||(i?n:qe)("Symbol."+e))}).store=t})),nt=me.f,it=tt("toStringTag"),rt=function(e,t,n){e&&!je(e=n?e:e.prototype,it)&&nt(e,it,{configurable:!0,value:t})},ot={};we(ot,tt("iterator"),(function(){return this}));var st,ut=function(e){return Object(oe(e))},ct=Be("IE_PROTO"),at=Object.prototype,ft=Object.getPrototypeOf||function(e){return e=ut(e),je(e,ct)?e[ct]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?at:null},ht=tt("iterator"),lt=!([].keys&&"next"in[].keys()),dt=function(){return this},vt=function(e,t,n,i,r,o,s){!function(e,t,n){e.prototype=et(ot,{next:ke(1,n)}),rt(e,t+" Iterator")}(n,t,i);var u,c,a,f=function(e){if(!lt&&e in v)return v[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},h=t+" Iterator",l="values"==r,d=!1,v=e.prototype,p=v[ht]||v["@@iterator"]||r&&v[r],y=p||f(r),b=r?l?f("entries"):y:void 0,g="Array"==t&&v.entries||p;if(g&&(a=ft(g.call(new e)))!==Object.prototype&&a.next&&rt(a,h,!0),l&&p&&"values"!==p.name&&(d=!0,y=function(){return p.call(this)}),s&&(lt||d||!v[ht])&&we(v,ht,y),Ae[t]=y,Ae[h]=dt,r)if(u={values:l?y:f("values"),keys:o?y:f("keys"),entries:b},s)for(c in u)c in v||_e(v,c,u[c]);else Te(Te.P+Te.F*(lt||d),t,u);return u},pt=(st=!0,function(e,t){var n,i,r=String(oe(e)),o=re(t),s=r.length;return o<0||o>=s?st?"":void 0:(n=r.charCodeAt(o))<55296||n>56319||o+1===s||(i=r.charCodeAt(o+1))<56320||i>57343?st?r.charAt(o):n:st?r.slice(o,o+2):i-56320+(n-55296<<10)+65536});vt(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=pt(t,n),this._i+=e.length,{value:e,done:!1})}));var yt=function(e,t){return{value:t,done:!!e}};vt(Array,"Array",(function(e,t){this._t=Pe(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,yt(1)):yt(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),Ae.Arguments=Ae.Array;for(var bt=tt("toStringTag"),gt="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),mt=0;mt<gt.length;mt++){var kt=gt[mt],wt=se[kt],Et=wt&&wt.prototype;Et&&!Et[bt]&&we(Et,bt,kt),Ae[kt]=Ae.Array}var jt={f:tt},St=jt.f("iterator"),Ot=i((function(e){e.exports={default:St,__esModule:!0}})),Tt=i((function(e){var t=qe("meta"),n=me.f,i=0,r=Object.isExtensible||function(){return!0},o=!he((function(){return r(Object.preventExtensions({}))})),s=function(e){n(e,t,{value:{i:"O"+ ++i,w:{}}})},u=e.exports={KEY:t,NEED:!1,fastKey:function(e,n){if(!ae(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!je(e,t)){if(!r(e))return"F";if(!n)return"E";s(e)}return e[t].i},getWeak:function(e,n){if(!je(e,t)){if(!r(e))return!0;if(!n)return!1;s(e)}return e[t].w},onFreeze:function(e){return o&&u.NEED&&r(e)&&!je(e,t)&&s(e),e}}})),_t=me.f,At=function(e){var t=ue.Symbol||(ue.Symbol={});"_"==e.charAt(0)||e in t||_t(t,e,{value:jt.f(e)})},Ct={f:Object.getOwnPropertySymbols},Rt={f:{}.propertyIsEnumerable},xt=Array.isArray||function(e){return"Array"==Re(e)},Pt=We.concat("length","prototype"),Lt={f:Object.getOwnPropertyNames||function(e){return $e(e,Pt)}},Mt=Lt.f,Nt={}.toString,It="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Dt={f:function(e){return It&&"[object Window]"==Nt.call(e)?function(e){try{return Mt(e)}catch(e){return It.slice()}}(e):Mt(Pe(e))}},Ht=Object.getOwnPropertyDescriptor,Ut={f:le?Ht:function(e,t){if(e=Pe(e),t=be(t,!0),ye)try{return Ht(e,t)}catch(e){}if(je(e,t))return ke(!Rt.f.call(e,t),e[t])}},qt=Tt.KEY,Ft=Ut.f,Bt=me.f,Jt=Dt.f,Gt=se.Symbol,$t=se.JSON,Wt=$t&&$t.stringify,zt=tt("_hidden"),Vt=tt("toPrimitive"),Kt={}.propertyIsEnumerable,Xt=De("symbol-registry"),Yt=De("symbols"),Zt=De("op-symbols"),Qt=Object.prototype,en="function"==typeof Gt,tn=se.QObject,nn=!tn||!tn.prototype||!tn.prototype.findChild,rn=le&&he((function(){return 7!=et(Bt({},"a",{get:function(){return Bt(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=Ft(Qt,t);i&&delete Qt[t],Bt(e,t,n),i&&e!==Qt&&Bt(Qt,t,i)}:Bt,on=function(e){var t=Yt[e]=et(Gt.prototype);return t._k=e,t},sn=en&&"symbol"==typeof Gt.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof Gt},un=function(e,t,n){return e===Qt&&un(Zt,t,n),fe(e),t=be(t,!0),fe(n),je(Yt,t)?(n.enumerable?(je(e,zt)&&e[zt][t]&&(e[zt][t]=!1),n=et(n,{enumerable:ke(0,!1)})):(je(e,zt)||Bt(e,zt,ke(1,{})),e[zt][t]=!0),rn(e,t,n)):Bt(e,t,n)},cn=function(e,t){fe(e);for(var n,i=function(e){var t=ze(e),n=Ct.f;if(n)for(var i,r=n(e),o=Rt.f,s=0;r.length>s;)o.call(e,i=r[s++])&&t.push(i);return t}(t=Pe(t)),r=0,o=i.length;o>r;)un(e,n=i[r++],t[n]);return e},an=function(e){var t=Kt.call(this,e=be(e,!0));return!(this===Qt&&je(Yt,e)&&!je(Zt,e))&&(!(t||!je(this,e)||!je(Yt,e)||je(this,zt)&&this[zt][e])||t)},fn=function(e,t){if(e=Pe(e),t=be(t,!0),e!==Qt||!je(Yt,t)||je(Zt,t)){var n=Ft(e,t);return!n||!je(Yt,t)||je(e,zt)&&e[zt][t]||(n.enumerable=!0),n}},hn=function(e){for(var t,n=Jt(Pe(e)),i=[],r=0;n.length>r;)je(Yt,t=n[r++])||t==zt||t==qt||i.push(t);return i},ln=function(e){for(var t,n=e===Qt,i=Jt(n?Zt:Pe(e)),r=[],o=0;i.length>o;)!je(Yt,t=i[o++])||n&&!je(Qt,t)||r.push(Yt[t]);return r};en||(_e((Gt=function(){if(this instanceof Gt)throw TypeError("Symbol is not a constructor!");var e=qe(arguments.length>0?arguments[0]:void 0),t=function(n){this===Qt&&t.call(Zt,n),je(this,zt)&&je(this[zt],e)&&(this[zt][e]=!1),rn(this,e,ke(1,n))};return le&&nn&&rn(Qt,e,{configurable:!0,set:t}),on(e)}).prototype,"toString",(function(){return this._k})),Ut.f=fn,me.f=un,Lt.f=Dt.f=hn,Rt.f=an,Ct.f=ln,jt.f=function(e){return on(tt(e))}),Te(Te.G+Te.W+Te.F*!en,{Symbol:Gt});for(var dn="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),vn=0;dn.length>vn;)tt(dn[vn++]);for(var pn=ze(tt.store),yn=0;pn.length>yn;)At(pn[yn++]);Te(Te.S+Te.F*!en,"Symbol",{for:function(e){return je(Xt,e+="")?Xt[e]:Xt[e]=Gt(e)},keyFor:function(e){if(!sn(e))throw TypeError(e+" is not a symbol!");for(var t in Xt)if(Xt[t]===e)return t},useSetter:function(){nn=!0},useSimple:function(){nn=!1}}),Te(Te.S+Te.F*!en,"Object",{create:function(e,t){return void 0===t?et(e):cn(et(e),t)},defineProperty:un,defineProperties:cn,getOwnPropertyDescriptor:fn,getOwnPropertyNames:hn,getOwnPropertySymbols:ln}),$t&&Te(Te.S+Te.F*(!en||he((function(){var e=Gt();return"[null]"!=Wt([e])||"{}"!=Wt({a:e})||"{}"!=Wt(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=t=i[1],(ae(t)||void 0!==e)&&!sn(e))return xt(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!sn(t))return t}),i[1]=t,Wt.apply($t,i)}}),Gt.prototype[Vt]||we(Gt.prototype,Vt,Gt.prototype.valueOf),rt(Gt,"Symbol"),rt(Math,"Math",!0),rt(se.JSON,"JSON",!0),At("asyncIterator"),At("observable");var bn=ue.Symbol,gn=i((function(e){e.exports={default:bn,__esModule:!0}})),mn=n(gn),kn=n(i((function(e,t){t.__esModule=!0;var n=o(Ot),i=o(gn),r="function"==typeof i.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===r(n.default)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":r(e)}}))),wn=function(e,t,n,i){try{return i?t(fe(n)[0],n[1]):t(n)}catch(t){var r=e.return;throw void 0!==r&&fe(r.call(e)),t}},En=tt("iterator"),jn=Array.prototype,Sn=function(e){return void 0!==e&&(Ae.Array===e||jn[En]===e)},On=function(e,t,n){t in e?me.f(e,t,ke(0,n)):e[t]=n},Tn=tt("toStringTag"),_n="Arguments"==Re(function(){return arguments}()),An=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),Tn))?n:_n?Re(t):"Object"==(i=Re(t))&&"function"==typeof t.callee?"Arguments":i},Cn=tt("iterator"),Rn=ue.getIteratorMethod=function(e){if(null!=e)return e[Cn]||e["@@iterator"]||Ae[An(e)]},xn=tt("iterator"),Pn=!1;try{var Ln=[7][xn]();Ln.return=function(){Pn=!0},Array.from(Ln,(function(){throw 2}))}catch(e){}Te(Te.S+Te.F*!function(e,t){if(!t&&!Pn)return!1;var n=!1;try{var i=[7],r=i[xn]();r.next=function(){return{done:n=!0}},i[xn]=function(){return r},e(i)}catch(e){}return n}((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,r,o=ut(e),s="function"==typeof this?this:Array,u=arguments.length,c=u>1?arguments[1]:void 0,a=void 0!==c,f=0,h=Rn(o);if(a&&(c=ce(c,u>2?arguments[2]:void 0,2)),null==h||s==Array&&Sn(h))for(n=new s(t=Me(o.length));t>f;f++)On(n,f,a?c(o[f],f):o[f]);else for(r=h.call(o),n=new s;!(i=r.next()).done;f++)On(n,f,a?wn(r,c,[i.value,f],!0):i.value);return n.length=f,n}});var Mn=ue.Array.from,Nn=i((function(e){e.exports={default:Mn,__esModule:!0}})),In=n(Nn),Dn=n(i((function(e,t){t.__esModule=!0;var n,i=(n=Nn)&&n.__esModule?n:{default:n};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}}))),Hn=i((function(e,t){function n(e,t,i){return function(){var r=i.concat(Array.prototype.slice.call(arguments));return r.length>=t?e.apply(this,r):n(e,t,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.flip=function(e){return function(t,n){return e(n,t)}},t.constant=function(e){return function(){return e}},t.on=function(e,t){return function(n,i){return e(t(n),t(i))}},t.compose=function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n.length-1;return function(t){for(var i=t,o=r;o>-1;o--)i=n[o].call(e,i);return i}},t.pipe=function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n.length-1;return function(t){for(var i=t,o=0;o<=r;o++)i=n[o].call(e,i);return i}},t.curry=function(e){return n(e,e.length,[])}})),Un=Object.assign,qn=!Un||he((function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=Un({},e)[n]||Object.keys(Un({},t)).join("")!=i}))?function(e,t){for(var n=ut(e),i=arguments.length,r=1,o=Ct.f,s=Rt.f;i>r;)for(var u,c=xe(arguments[r++]),a=o?ze(c).concat(o(c)):ze(c),f=a.length,h=0;f>h;)s.call(c,u=a[h++])&&(n[u]=c[u]);return n}:Un;Te(Te.S+Te.F,"Object",{assign:qn});var Fn=ue.Object.assign,Bn=i((function(e){e.exports={default:Fn,__esModule:!0}})),Jn=n(i((function(e,t){t.__esModule=!0;var n,i=(n=Bn)&&n.__esModule?n:{default:n};t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}})));!function(e,t){var n=(ue.Object||{})[e]||Object[e],i={};i[e]=t(n),Te(Te.S+Te.F*he((function(){n(1)})),"Object",i)}("keys",(function(){return function(e){return ze(ut(e))}}));var Gn=ue.Object.keys,$n=n(i((function(e){e.exports={default:Gn,__esModule:!0}}))),Wn=Math.floor;Te(Te.S,"Number",{isInteger:function(e){return!ae(e)&&isFinite(e)&&Wn(e)===e}});var zn=ue.Number.isInteger,Vn=n(i((function(e){e.exports={default:zn,__esModule:!0}}))),Kn=n(i((function(e,t){t.__esModule=!0,t.default=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}}))),Xn=function(e,t){return ee(this,undefined),[].concat(Dn(t),Dn(e))}.bind(void 0),Yn=Hn.curry(Xn);(function(e){return ee(this,undefined),Array.isArray(e)?e:[e]}).bind(void 0);var Zn=function(e,t){return ee(this,undefined),t===e.length-1}.bind(void 0),Qn=Hn.curry(Zn),ei=function(e,t){return ee(this,undefined),Qn(e,t)?0:t+1}.bind(void 0);Hn.curry(ei);var ti=function(e){return ee(this,undefined),Math.max.apply(Math,Dn($n(e)))+1}.bind(void 0);(function(e){return ee(this,undefined),In("length"in e?e:Jn({},e,{length:ti(e)}))}).bind(void 0);var ni=function(e,t,n){return ee(this,undefined),[].concat(Dn(n.slice(0,e)),Dn(t),Dn(n.slice(e+1)))}.bind(void 0);Hn.curry(ni);var ii=function(e,t){return ee(this,undefined),Vn(e)&&e>=t}.bind(void 0),ri=function(e){return ee(this,undefined),ii(Number(e),0)}.bind(void 0);(function(e){e.length;var t=Kn(e,["length"]);return ee(this,undefined),$n(t).every(ri)}).bind(void 0);var oi=function(e,t){return ee(this,undefined),[].concat(Dn(e),Dn(t))}.bind(void 0);Hn.curry(oi);var si=function(e,t,n,i){return ee(this,undefined),i.reduce(function(n,i,r){return ee(this,undefined),e(i,r,n)?t(n,i,r):n}.bind(this),n)}.bind(void 0);Hn.curry(si);var ui=function(e,t,n,i){ee(this,undefined);var r=n;return i.every(function(n,i){ee(this,undefined);var o=e(n,i,r);return o&&(r=t(r,n,i)),o}.bind(this)),r}.bind(void 0);Hn.curry(ui);var ci=function(e,t,n){return ee(this,undefined),[].concat(Dn(n.slice(0,e)),Dn(n.slice(e+t)))}.bind(void 0),ai=Hn.curry(ci),fi=function(e,t){return ee(this,undefined),[].concat(Dn(Array(e))).map(function(){return ee(this,undefined),t}.bind(this))}.bind(void 0);Hn.curry(fi);var hi=function(e,t,n){return ee(this,undefined),[].concat(Dn(n.slice(0,e)),Dn(t),Dn(n.slice(e+t.length)))}.bind(void 0),li=Hn.curry(hi),di=function(e,t){return ee(this,undefined),t<0?e.length-t:t}.bind(void 0);Hn.curry(di);var vi=function e(t,n){if(t===n)return!0;var i,r=Array.isArray(t),o=Array.isArray(n);if(r&&o){if(t.length!=n.length)return!1;for(i=0;i<t.length;i++)if(!e(t[i],n[i]))return!1;return!0}if(r!=o)return!1;if(t&&n&&"object"==typeof t&&"object"==typeof n){var s=Object.keys(t);if(s.length!==Object.keys(n).length)return!1;var u=t instanceof Date,c=n instanceof Date;if(u&&c)return t.getTime()==n.getTime();if(u!=c)return!1;var a=t instanceof RegExp,f=n instanceof RegExp;if(a&&f)return t.toString()==n.toString();if(a!=f)return!1;for(i=0;i<s.length;i++)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=0;i<s.length;i++)if(!e(t[s[i]],n[s[i]]))return!1;return!0}return!1};Te(Te.S+Te.F*!le,"Object",{defineProperty:me.f});var pi,yi=ue.Object,bi=function(e,t,n){return yi.defineProperty(e,t,n)},gi=i((function(e){e.exports={default:bi,__esModule:!0}})),mi=n(i((function(e,t){t.__esModule=!0;var n,i=(n=gi)&&n.__esModule?n:{default:n};t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}}))),ki=tt("iterator"),wi=ue.isIterable=function(e){var t=Object(e);return void 0!==t[ki]||"@@iterator"in t||Ae.hasOwnProperty(An(t))},Ei=i((function(e){e.exports={default:wi,__esModule:!0}})),ji=ue.getIterator=function(e){var t=Rn(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return fe(t.call(e))},Si=i((function(e){e.exports={default:ji,__esModule:!0}})),Oi=n(i((function(e,t){t.__esModule=!0;var n=r(Ei),i=r(Si);function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,n.default)(Object(e)))return function(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var u,c=(0,i.default)(e);!(r=(u=c.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}))),Ti=Rt.f,_i=(pi=!0,function(e){for(var t,n=Pe(e),i=ze(n),r=i.length,o=0,s=[];r>o;)Ti.call(n,t=i[o++])&&s.push(pi?[t,n[t]]:n[t]);return s});Te(Te.S,"Object",{entries:function(e){return _i(e)}});var Ai=ue.Object.entries,Ci=n(i((function(e){e.exports={default:Ai,__esModule:!0}}))),Ri=function(e,t){return ee(this,undefined),t[e]}.bind(void 0),xi=te.curry(Ri),Pi=function(e){return ee(this,undefined),null!==e&&"object"===(void 0===e?"undefined":kn(e))}.bind(void 0),Li=function(e){return ee(this,undefined),Array.isArray(e)||Pi(e)}.bind(void 0),Mi=function(e,t,n){return ee(this,undefined),Qn(t,e)?n:Di(e+1,t,n)}.bind(void 0),Ni=function(e,t,n){return ee(this,undefined),"Expected to find a composite at ["+String(t.join(", "))+"]["+String(e)+"], but instead got: "+(void 0===n?"undefined":kn(n))}.bind(void 0),Ii=function(e,t,n){if(ee(this,undefined),Li(n))return n;throw new Error(Ni(e,t,n))}.bind(void 0),Di=function(e,t,n){return ee(this,undefined),void 0===n?void 0:Mi(e,t,xi(t[e],Ii(e,t,n)))}.bind(void 0),Hi=function(e,t){return ee(this,undefined),0===e.length?void 0:Di(0,e,t)}.bind(void 0),Ui=te.curry(Hi),qi=function(e){return ee(this,undefined),Array.isArray(e)?[].concat(Dn(e.keys())):$n(e)}.bind(void 0),Fi=function(e,t,n){return ee(this,undefined),vi(Ui(e,n),t)}.bind(void 0),Bi=te.curry(Fi),Ji=function(e,t){return ee(this,undefined),Object.prototype.hasOwnProperty.call(t,e)}.bind(void 0),Gi=te.curry(Ji),$i=function(e,t){ee(this,undefined);var n=qi(e);return n.length===qi(t).length&&n.every(function(n){return ee(this,undefined),Gi(n,t)&&xi(n,e)===xi(n,t)}.bind(this))}.bind(void 0),Wi=te.curry($i),zi=function(e){return ee(this,undefined),0===qi(e).length}.bind(void 0),Vi=function(e,t){return ee(this,undefined),Ci(t).reduce(function(n,i){var r=Oi(i,2),o=r[0],s=r[1];return ee(this,undefined),Jn({},n,mi({},o,e(s,o,t)))}.bind(this),{})}.bind(void 0),Ki=function(e,t){return ee(this,undefined),Array.isArray(t)?t.map(e):Vi(e,t)}.bind(void 0),Xi=te.curry(Ki),Yi=function(e,t){t[e];var n=Kn(t,[e]);return ee(this,undefined),n}.bind(void 0),Zi=function(e,t){return ee(this,undefined),Array.isArray(t)?ai(e,1,t):Yi(e,t)}.bind(void 0),Qi=te.curry(Zi),er=function(e){return ee(this,undefined),Array.isArray(e)?[].concat(Dn(e)):Jn({},e)}.bind(void 0),tr=function(e){ee(this,undefined);var t=er(e);return{origin:t,current:t,previous:void 0}}.bind(void 0),nr=function(e,t,n){return ee(this,undefined),n[e]=t,xi(e,n)}.bind(void 0),ir=function(e,t,n,i){return ee(this,undefined),Jn({},i,{current:nr(e[t],n,i.current),previous:i.current})}.bind(void 0),rr=function(e,t,n){ee(this,undefined);var i=Qi(e[t],n.current);return Jn({},n,0===t?{current:i,origin:i}:{previous:nr(e[t-1],i,n.previous)})}.bind(void 0),or=mn("composite.updateIn.removeAction"),sr=function(e,t,n,i){return ee(this,undefined),n===or?rr(e,t,i):ir(e,t,n,i)}.bind(void 0),ur=function(e){return ee(this,undefined),"number"==typeof e?[]:{}}.bind(void 0),cr=function(e,t,n){return ee(this,undefined),Gi(e,n)?er(xi(e,n)):ur(t)}.bind(void 0),ar=function(e,t,n,i){return ee(this,undefined),Qn(e,n)?t(xi(e[n],i)):cr(e[n],e[n+1],i)}.bind(void 0),fr=function(e,t){return ee(this,undefined),function(n,i,r){return ee(this,undefined),sr(e,r,ar(e,t,r,n.current),n)}.bind(this)}.bind(void 0),hr=function(e,t,n){return ee(this,undefined),0===e.length?n:e.reduce(fr(e,t),tr(n)).origin}.bind(void 0),lr=te.curry(hr);lr.remove=or;var dr=function(){return ee(this,undefined),lr.remove}.bind(void 0),vr=function(e,t){return ee(this,undefined),lr(e,dr,t)}.bind(void 0);te.curry(vr);var pr=function(e,t,n){ee(this,undefined);var i=er(n);return i[e]=t,i}.bind(void 0);te.curry(pr);var yr=function(e,t,n){return ee(this,undefined),lr(e,function(){return ee(this,undefined),t}.bind(this),n)}.bind(void 0);te.curry(yr);var br=function(e,t){return ee(this,undefined),Boolean(Number(e)^Number(t))}.bind(void 0),gr=function(e,t){return ee(this,undefined),e===t||!br(Array.isArray(e),Array.isArray(t))&&Wi(e,t)}.bind(void 0);te.curry(gr);(function(e){return ee(this,undefined),zi(e)?void 0:e}).bind(void 0),i((function(e,t){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(t){e.exports=t.Phoenix=n(2)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){function i(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}return n}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.r(t),n.d(t,"Channel",(function(){return L})),n.d(t,"Serializer",(function(){return M})),n.d(t,"Socket",(function(){return N})),n.d(t,"LongPoll",(function(){return I})),n.d(t,"Ajax",(function(){return D})),n.d(t,"Presence",(function(){return H}));var h="undefined"!=typeof self?self:null,l="undefined"!=typeof window?window:null,d=h||l||void 0,v=0,p=1,y=2,b=3,g="closed",m="errored",k="joined",w="joining",E="leaving",j="phx_close",S="phx_error",O="phx_join",T="phx_reply",_="phx_leave",A=[j,S,O,T,_],C="longpoll",R="websocket",x=function(e){return"function"==typeof e?e:function(){return e}},P=function(){function e(t,n,i,r){c(this,e),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=r,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return f(e,[{key:"resend",value:function(e){this.timeout=e,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(e){var t=e.status,n=e.response;e.ref,this.recHooks.filter((function(e){return e.status===t})).forEach((function(e){return e.callback(n)}))}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var e=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,(function(t){e.cancelRefEvent(),e.cancelTimeout(),e.receivedResp=t,e.matchReceive(t)})),this.timeoutTimer=setTimeout((function(){e.trigger("timeout",{})}),this.timeout)}},{key:"hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}},{key:"trigger",value:function(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}]),e}(),L=function(){function e(t,n,i){var r=this;c(this,e),this.state=g,this.topic=t,this.params=x(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new P(this,O,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new U((function(){r.socket.isConnected()&&r.rejoin()}),this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError((function(){return r.rejoinTimer.reset()}))),this.stateChangeRefs.push(this.socket.onOpen((function(){r.rejoinTimer.reset(),r.isErrored()&&r.rejoin()}))),this.joinPush.receive("ok",(function(){r.state=k,r.rejoinTimer.reset(),r.pushBuffer.forEach((function(e){return e.send()})),r.pushBuffer=[]})),this.joinPush.receive("error",(function(){r.state=m,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()})),this.onClose((function(){r.rejoinTimer.reset(),r.socket.hasLogger()&&r.socket.log("channel","close ".concat(r.topic," ").concat(r.joinRef())),r.state=g,r.socket.remove(r)})),this.onError((function(e){r.socket.hasLogger()&&r.socket.log("channel","error ".concat(r.topic),e),r.isJoining()&&r.joinPush.reset(),r.state=m,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()})),this.joinPush.receive("timeout",(function(){r.socket.hasLogger()&&r.socket.log("channel","timeout ".concat(r.topic," (").concat(r.joinRef(),")"),r.joinPush.timeout),new P(r,_,x({}),r.timeout).send(),r.state=m,r.joinPush.reset(),r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()})),this.on(T,(function(e,t){r.trigger(r.replyEventName(t),e)}))}return f(e,[{key:"join",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(e){this.on(j,e)}},{key:"onError",value:function(e){return this.on(S,(function(t){return e(t)}))}},{key:"on",value:function(e,t){var n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}},{key:"off",value:function(e,t){this.bindings=this.bindings.filter((function(n){return!(n.event===e&&(void 0===t||t===n.ref))}))}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(t=t||{},!this.joinedOnce)throw new Error("tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var i=new P(this,e,(function(){return t}),n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:"leave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=E;var n=function(){e.socket.hasLogger()&&e.socket.log("channel","leave ".concat(e.topic)),e.trigger(j,"leave")},i=new P(this,_,x({}),t);return i.receive("ok",(function(){return n()})).receive("timeout",(function(){return n()})),i.send(),this.canPush()||i.trigger("ok",{}),i}},{key:"onMessage",value:function(e,t,n){return t}},{key:"isLifecycleEvent",value:function(e){return A.indexOf(e)>=0}},{key:"isMember",value:function(e,t,n,i){return!(this.topic!==e||i&&i!==this.joinRef()&&this.isLifecycleEvent(t)&&(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:i}),1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=w,this.joinPush.resend(e))}},{key:"trigger",value:function(e,t,n,i){var r=this.onMessage(e,t,n,i);if(t&&!r)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var o=this.bindings.filter((function(t){return t.event===e})),s=0;s<o.length;s++)o[s].callback(r,n,i||this.joinRef())}},{key:"replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"isClosed",value:function(){return this.state===g}},{key:"isErrored",value:function(){return this.state===m}},{key:"isJoined",value:function(){return this.state===k}},{key:"isJoining",value:function(){return this.state===w}},{key:"isLeaving",value:function(){return this.state===E}}]),e}(),M={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode:function(e,t){if(e.payload.constructor===ArrayBuffer)return t(this.binaryEncode(e));var n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))},decode:function(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));var n=o(JSON.parse(e),5);return t({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})},binaryEncode:function(e){var t=e.join_ref,n=e.ref,i=e.event,r=e.topic,o=e.payload,s=this.META_LENGTH+t.length+n.length+r.length+i.length,u=new ArrayBuffer(this.HEADER_LENGTH+s),c=new DataView(u),a=0;c.setUint8(a++,this.KINDS.push),c.setUint8(a++,t.length),c.setUint8(a++,n.length),c.setUint8(a++,r.length),c.setUint8(a++,i.length),Array.from(t,(function(e){return c.setUint8(a++,e.charCodeAt(0))})),Array.from(n,(function(e){return c.setUint8(a++,e.charCodeAt(0))})),Array.from(r,(function(e){return c.setUint8(a++,e.charCodeAt(0))})),Array.from(i,(function(e){return c.setUint8(a++,e.charCodeAt(0))}));var f=new Uint8Array(u.byteLength+o.byteLength);return f.set(new Uint8Array(u),0),f.set(new Uint8Array(o),u.byteLength),f.buffer},binaryDecode:function(e){var t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this.decodePush(e,t,i);case this.KINDS.reply:return this.decodeReply(e,t,i);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,i)}},decodePush:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),o=t.getUint8(3),s=this.HEADER_LENGTH+this.META_LENGTH-1,u=n.decode(e.slice(s,s+i));s+=i;var c=n.decode(e.slice(s,s+r));s+=r;var a=n.decode(e.slice(s,s+o));return s+=o,{join_ref:u,ref:null,topic:c,event:a,payload:e.slice(s,e.byteLength)}},decodeReply:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),o=t.getUint8(3),s=t.getUint8(4),u=this.HEADER_LENGTH+this.META_LENGTH,c=n.decode(e.slice(u,u+i));u+=i;var a=n.decode(e.slice(u,u+r));u+=r;var f=n.decode(e.slice(u,u+o));u+=o;var h=n.decode(e.slice(u,u+s));u+=s;var l=e.slice(u,e.byteLength);return{join_ref:c,ref:a,topic:f,event:T,payload:{status:h,response:l}}},decodeBroadcast:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),o=this.HEADER_LENGTH+2,s=n.decode(e.slice(o,o+i));o+=i;var u=n.decode(e.slice(o,o+r));return o+=r,{join_ref:null,ref:null,topic:s,event:u,payload:e.slice(o,e.byteLength)}}},N=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||1e4,this.transport=i.transport||d.WebSocket||I,this.defaultEncoder=M.encode.bind(M),this.defaultDecoder=M.decode.bind(M),this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||"arraybuffer",this.transport!==I?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),l&&l.addEventListener&&l.addEventListener("unload",(function(e){n.conn&&(n.unloaded=!0,n.abnormalClose("unloaded"))})),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(e){return i.rejoinAfterMs?i.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4},this.reconnectAfterMs=function(e){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=x(i.params||{}),this.endPoint="".concat(t,"/").concat(R),this.vsn=i.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new U((function(){n.teardown((function(){return n.connect()}))}),this.reconnectAfterMs)}return f(e,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var e=D.appendParams(D.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?"".concat(this.protocol(),":").concat(e):"".concat(this.protocol(),"://").concat(location.host).concat(e)}},{key:"disconnect",value:function(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}},{key:"connect",value:function(e){var t=this;e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=x(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return t.onConnOpen()},this.conn.onerror=function(e){return t.onConnError(e)},this.conn.onmessage=function(e){return t.onConnMessage(e)},this.conn.onclose=function(e){return t.onConnClose(e)})}},{key:"log",value:function(e,t,n){this.logger(e,t,n)}},{key:"hasLogger",value:function(){return null!==this.logger}},{key:"onOpen",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}},{key:"onClose",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}},{key:"onError",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}},{key:"onMessage",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach((function(e){return(0,o(e,2)[1])()}))}},{key:"resetHeartbeat",value:function(){var e=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((function(){return e.sendHeartbeat()}),this.heartbeatIntervalMs))}},{key:"teardown",value:function(e,t,n){var i=this;if(!this.conn)return e&&e();this.waitForBufferDone((function(){i.conn&&(t?i.conn.close(t,n||""):i.conn.close()),i.waitForSocketClosed((function(){i.conn&&(i.conn.onclose=function(){},i.conn=null),e&&e()}))}))}},{key:"waitForBufferDone",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&this.conn.bufferedAmount?setTimeout((function(){t.waitForBufferDone(e,n+1)}),150*n):e()}},{key:"waitForSocketClosed",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&this.conn.readyState!==b?setTimeout((function(){t.waitForSocketClosed(e,n+1)}),150*n):e()}},{key:"onConnClose",value:function(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((function(t){return(0,o(t,2)[1])(e)}))}},{key:"onConnError",value:function(e){this.hasLogger()&&this.log("transport",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach((function(t){return(0,o(t,2)[1])(e)}))}},{key:"triggerChanError",value:function(){this.channels.forEach((function(e){e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(S)}))}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case v:return"connecting";case p:return"open";case y:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter((function(t){return t.joinRef()!==e.joinRef()}))}},{key:"off",value:function(e){for(var t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter((function(t){var n=o(t,1)[0];return-1===e.indexOf(n)}))}},{key:"channel",value:function(e){var t=new L(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},this);return this.channels.push(t),t}},{key:"push",value:function(e){var t=this;if(this.hasLogger()){var n=e.topic,i=e.event,r=e.payload,o=e.ref,s=e.join_ref;this.log("push","".concat(n," ").concat(i," (").concat(s,", ").concat(o,")"),r)}this.isConnected()?this.encode(e,(function(e){return t.conn.send(e)})):this.sendBuffer.push((function(){return t.encode(e,(function(e){return t.conn.send(e)}))}))}},{key:"makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"sendHeartbeat",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}},{key:"abnormalClose",value:function(e){this.closeWasClean=!1,this.conn.readyState===p&&this.conn.close(1e3,e)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((function(e){return e()})),this.sendBuffer=[])}},{key:"onConnMessage",value:function(e){var t=this;this.decode(e.data,(function(e){var n=e.topic,i=e.event,r=e.payload,s=e.ref,u=e.join_ref;s&&s===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.hasLogger()&&t.log("receive","".concat(r.status||""," ").concat(n," ").concat(i," ").concat(s&&"("+s+")"||""),r);for(var c=0;c<t.channels.length;c++){var a=t.channels[c];a.isMember(n,i,r,u)&&a.trigger(i,r,s,u)}for(var f=0;f<t.stateChangeCallbacks.message.length;f++)(0,o(t.stateChangeCallbacks.message[f],2)[1])(e)}))}},{key:"leaveOpenTopic",value:function(e){var t=this.channels.find((function(t){return t.topic===e&&(t.isJoined()||t.isJoining())}));t&&(this.hasLogger()&&this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.leave())}}]),e}(),I=function(){function e(t){c(this,e),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=v,this.poll()}return f(e,[{key:"normalizeEndpoint",value:function(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+R),"$1/"+C)}},{key:"endpointURL",value:function(){return D.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=v}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var e=this;this.readyState!==p&&this.readyState!==v||D.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),(function(t){if(t){var n=t.status,i=t.token,r=t.messages;e.token=i}else n=0;switch(n){case 200:r.forEach((function(t){return e.onmessage({data:t})})),e.poll();break;case 204:e.poll();break;case 410:e.readyState=p,e.onopen(),e.poll();break;case 403:e.onerror(),e.close();break;case 0:case 500:e.onerror(),e.closeAndRetry();break;default:throw new Error("unhandled poll status ".concat(n))}}))}},{key:"send",value:function(e){var t=this;D.request("POST",this.endpointURL(),"application/json",e,this.timeout,this.onerror.bind(this,"timeout"),(function(e){e&&200===e.status||(t.onerror(e&&e.status),t.closeAndRetry())}))}},{key:"close",value:function(e,t){this.readyState=b,this.onclose()}}]),e}(),D=function(){function e(){c(this,e)}return f(e,null,[{key:"request",value:function(e,t,n,i,r,o,s){if(d.XDomainRequest){var u=new XDomainRequest;this.xdomainRequest(u,e,t,i,r,o,s)}else{var c=new d.XMLHttpRequest;this.xhrRequest(c,e,t,n,i,r,o,s)}}},{key:"xdomainRequest",value:function(e,t,n,i,r,o,s){var u=this;e.timeout=r,e.open(t,n),e.onload=function(){var t=u.parseJSON(e.responseText);s&&s(t)},o&&(e.ontimeout=o),e.onprogress=function(){},e.send(i)}},{key:"xhrRequest",value:function(e,t,n,i,r,o,s,u){var c=this;e.open(t,n,!0),e.timeout=o,e.setRequestHeader("Content-Type",i),e.onerror=function(){u&&u(null)},e.onreadystatechange=function(){if(e.readyState===c.states.complete&&u){var t=c.parseJSON(e.responseText);u(t)}},s&&(e.ontimeout=s),e.send(r)}},{key:"parseJSON",value:function(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}},{key:"serialize",value:function(e,t){var n=[];for(var i in e)if(e.hasOwnProperty(i)){var o=t?"".concat(t,"[").concat(i,"]"):i,s=e[i];"object"===r(s)?n.push(this.serialize(s,o)):n.push(encodeURIComponent(o)+"="+encodeURIComponent(s))}return n.join("&")}},{key:"appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var n=e.match(/\?/)?"&":"?";return"".concat(e).concat(n).concat(this.serialize(t))}}]),e}();D.states={complete:4};var H=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,e);var r=i.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(r.state,(function(t){var i=n.caller,r=i.onJoin,o=i.onLeave,s=i.onSync;n.joinRef=n.channel.joinRef(),n.state=e.syncState(n.state,t,r,o),n.pendingDiffs.forEach((function(t){n.state=e.syncDiff(n.state,t,r,o)})),n.pendingDiffs=[],s()})),this.channel.on(r.diff,(function(t){var i=n.caller,r=i.onJoin,o=i.onLeave,s=i.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(n.state=e.syncDiff(n.state,t,r,o),s())}))}return f(e,[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"list",value:function(t){return e.list(this.state,t)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(e,t,n,i){var r=this,o=this.clone(e),s={},u={};return this.map(o,(function(e,n){t[e]||(u[e]=n)})),this.map(t,(function(e,t){var n=o[e];if(n){var i=t.metas.map((function(e){return e.phx_ref})),c=n.metas.map((function(e){return e.phx_ref})),a=t.metas.filter((function(e){return c.indexOf(e.phx_ref)<0})),f=n.metas.filter((function(e){return i.indexOf(e.phx_ref)<0}));a.length>0&&(s[e]=t,s[e].metas=a),f.length>0&&(u[e]=r.clone(n),u[e].metas=f)}else s[e]=t})),this.syncDiff(o,{joins:s,leaves:u},n,i)}},{key:"syncDiff",value:function(e,t,n,r){var o=t.joins,s=t.leaves,u=this.clone(e);return n||(n=function(){}),r||(r=function(){}),this.map(o,(function(e,t){var r=u[e];if(u[e]=t,r){var o,s=u[e].metas.map((function(e){return e.phx_ref})),c=r.metas.filter((function(e){return s.indexOf(e.phx_ref)<0}));(o=u[e].metas).unshift.apply(o,i(c))}n(e,r,t)})),this.map(s,(function(e,t){var n=u[e];if(n){var i=t.metas.map((function(e){return e.phx_ref}));n.metas=n.metas.filter((function(e){return i.indexOf(e.phx_ref)<0})),r(e,n,t),0===n.metas.length&&delete u[e]}})),u}},{key:"list",value:function(e,t){return t||(t=function(e,t){return t}),this.map(e,(function(e,n){return t(e,n)}))}},{key:"map",value:function(e,t){return Object.getOwnPropertyNames(e).map((function(n){return t(n,e[n])}))}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}(),U=function(){function e(t,n){c(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return f(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}()}])}));var mr=function(e,t){return{value:t,done:!!e}},kr={},wr=function(e){return R(x(e))},Er=Math.max,jr=Math.min,Sr=function(e){return function(t,n,i){var r,o=wr(t),s=D(o.length),u=function(e,t){return(e=N(e))<0?Er(e+t,0):jr(e,t)}(i,s);if(e&&n!=n){for(;s>u;)if((r=o[u++])!=r)return!0}else for(;s>u;u++)if((e||u in o)&&o[u]===n)return e||u||0;return!e&&-1}},Or=U("keys"),Tr=function(e){return Or[e]||(Or[e]=E(e))},_r=Sr(!1),Ar=Tr("IE_PROTO"),Cr="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),Rr=Object.keys||function(e){return function(e,t){var n,i=wr(e),r=0,o=[];for(n in i)n!=Ar&&m(i,n)&&o.push(n);for(;t.length>r;)m(i,n=t[r++])&&(~_r(o,n)||o.push(n));return o}(e,Cr)},xr=a?Object.defineProperties:function(e,t){u(e);for(var n,i=Rr(t),r=i.length,o=0;r>o;)p.f(e,n=i[o++],t[n]);return e},Pr=r.document,Lr=Pr&&Pr.documentElement,Mr=Tr("IE_PROTO"),Nr=function(){},Ir=function(){var e,t=l("iframe"),n=Cr.length;for(t.style.display="none",Lr.appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),Ir=e.F;n--;)delete Ir.prototype[Cr[n]];return Ir()},Dr=Object.create||function(e,t){var n;return null!==e?(Nr.prototype=u(e),n=new Nr,Nr.prototype=null,n[Mr]=e):n=Ir(),void 0===t?n:xr(n,t)},Hr=p.f,Ur=q("toStringTag"),qr=function(e,t,n){e&&!m(e=n?e:e.prototype,Ur)&&Hr(e,Ur,{configurable:!0,value:t})},Fr={};b(Fr,q("iterator"),(function(){return this}));var Br=function(e,t,n){e.prototype=Dr(Fr,{next:y(1,n)}),qr(e,t+" Iterator")},Jr=Tr("IE_PROTO"),Gr=Object.prototype,$r=Object.getPrototypeOf||function(e){return e=P(e),m(e,Jr)?e[Jr]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Gr:null},Wr=q("iterator"),zr=!([].keys&&"next"in[].keys()),Vr=function(){return this},Kr=function(e,t,n,i,r,o,s){Br(n,t,i);var u,c,a,f=function(e){if(!zr&&e in v)return v[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},h=t+" Iterator",l="values"==r,d=!1,v=e.prototype,p=v[Wr]||v["@@iterator"]||r&&v[r],y=p||f(r),g=r?l?f("entries"):y:void 0,m="Array"==t&&v.entries||p;if(m&&(a=$r(m.call(new e)))!==Object.prototype&&a.next&&(qr(a,h,!0),"function"!=typeof a[Wr]&&b(a,Wr,Vr)),l&&p&&"values"!==p.name&&(d=!0,y=function(){return p.call(this)}),(zr||d||!v[Wr])&&b(v,Wr,y),kr[t]=y,kr[h]=Vr,r)if(u={values:l?y:f("values"),keys:o?y:f("keys"),entries:g},s)for(c in u)c in v||j(v,c,u[c]);else _(_.P+_.F*(zr||d),t,u);return u}(Array,"Array",(function(e,t){this._t=wr(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,mr(1)):mr(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values");kr.Arguments=kr.Array,W("keys"),W("values"),W("entries");for(var Xr=q("iterator"),Yr=q("toStringTag"),Zr=kr.Array,Qr={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},eo=Rr(Qr),to=0;to<eo.length;to++){var no,io=eo[to],ro=Qr[io],oo=r[io],so=oo&&oo.prototype;if(so&&(so[Xr]||b(so,Xr,Zr),so[Yr]||b(so,Yr,io),kr[io]=Zr,ro))for(no in Kr)so[no]||j(so,no,Kr[no],!0)}var uo=function(e,t){return!!e&&c((function(){t?e.call(null,(function(){}),1):e.call(null)}))},co=J(0),ao=uo([].forEach,!0);_(_.P+_.F*!ao,"Array",{forEach:function(e){return co(this,e,arguments[1])}});var fo=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}};var ho=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)};var lo=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var vo=function(e){return fo(e)||ho(e)||lo()},po=J(1);_(_.P+_.F*!uo([].map,!0),"Array",{map:function(e){return po(this,e,arguments[1])}});var yo,bo,go=function(e){return function(t,n){var i,r,o=String(x(t)),s=N(n),u=o.length;return s<0||s>=u?e?"":void 0:(i=o.charCodeAt(s))<55296||i>56319||s+1===u||(r=o.charCodeAt(s+1))<56320||r>57343?e?o.charAt(s):i:e?o.slice(s,s+2):r-56320+(i-55296<<10)+65536}}(!0),mo=function(e,t,n){return t+(n?go(e,t).length:1)},ko=q("toStringTag"),wo="Arguments"==C(function(){return arguments}()),Eo=RegExp.prototype.exec,jo=function(e,t){var n,i,r,o,s=e.exec;if("function"==typeof s){var u=s.call(e,t);if("object"!=typeof u)throw new TypeError("RegExp exec method returned something other than an Object or null");return u}if("RegExp"!==(void 0===(n=e)?"Undefined":null===n?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(i=Object(n),ko))?r:wo?C(i):"Object"==(o=C(i))&&"function"==typeof i.callee?"Arguments":o))throw new TypeError("RegExp#exec called on incompatible receiver");return Eo.call(e,t)},So=function(){var e=u(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Oo=RegExp.prototype.exec,To=String.prototype.replace,_o=Oo,Ao=(yo=/a/,bo=/b*/g,Oo.call(yo,"a"),Oo.call(bo,"a"),0!==yo.lastIndex||0!==bo.lastIndex),Co=void 0!==/()??/.exec("")[1];(Ao||Co)&&(_o=function(e){var t,n,i,r,o=this;return Co&&(n=new RegExp("^"+o.source+"$(?!\\s)",So.call(o))),Ao&&(t=o.lastIndex),i=Oo.call(o,e),Ao&&i&&(o.lastIndex=o.global?i.index+i[0].length:t),Co&&i&&i.length>1&&To.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i});var Ro=_o;_({target:"RegExp",proto:!0,forced:Ro!==/./.exec},{exec:Ro});var xo=q("species"),Po=!c((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Lo=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();!function(e,t,n){var i=q(e),r=!c((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),o=r?!c((function(){var t=!1,n=/a/;return n.exec=function(){return t=!0,null},"split"===e&&(n.constructor={},n.constructor[xo]=function(){return n}),n[i](""),!t})):void 0;if(!r||!o||"replace"===e&&!Po||"split"===e&&!Lo){var s=/./[i],u=n(x,i,""[e],(function(e,t,n,i,o){return t.exec===Ro?r&&!o?{done:!0,value:s.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}})),a=u[0],f=u[1];j(String.prototype,e,a),b(RegExp.prototype,i,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)})}}("match",1,(function(e,t,n,i){return[function(n){var i=e(this),r=null==n?void 0:n[t];return void 0!==r?r.call(n,i):new RegExp(n)[t](String(i))},function(e){var t=i(n,e,this);if(t.done)return t.value;var r=u(e),o=String(this);if(!r.global)return jo(r,o);var s=r.unicode;r.lastIndex=0;for(var c,a=[],f=0;null!==(c=jo(r,o));){var h=String(c[0]);a[f]=h,""===h&&(r.lastIndex=mo(o,D(r.lastIndex),s)),f++}return 0===f?null:a}]}));var Mo=J(3);_(_.P+_.F*!uo([].some,!0),"Array",{some:function(e){return Mo(this,e,arguments[1])}});var No=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)},Io=[].slice,Do={},Ho=function(e,t,n){if(!(t in Do)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";Do[t]=Function("F,a","return new F("+i.join(",")+")")}return Do[t](e,n)},Uo=Function.bind||function(e){var t=S(this),n=Io.call(arguments,1),i=function(){var r=n.concat(Io.call(arguments));return this instanceof i?Ho(t,r.length,r):No(t,r,e)};return s(t.prototype)&&(i.prototype=t.prototype),i};_(_.P,"Function",{bind:Uo});var qo=function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},Fo=function(e){var t=this;return qo(this,undefined),e.map(function(e){var n=e.column,i=e.line;return qo(this,t),"".concat(i,":").concat(n)}.bind(this)).join("; ")}.bind(void 0),Bo=function(e){var t=e.message,n=e.locations;return qo(this,undefined),t+(n?" (".concat(Fo(n),")"):"")}.bind(void 0),Jo=function(e){return qo(this,undefined),e.map(Bo).join("\n")}.bind(void 0),Go=/^\s*(query|mutation|subscription|\{)/,$o=function(e){return qo(this,undefined),"{"===e?"query":e}.bind(void 0),Wo=function(e){qo(this,undefined);var t=e.match(Go);if(!t)throw new TypeError("Invalid operation:\n".concat(e));return $o(t[1])}.bind(void 0),zo=function(e){return qo(this,undefined),"OperationDefinition"===e.kind&&"subscription"===e.operation}.bind(void 0);(function(e){return qo(this,undefined),e.definitions.some(zo)}).bind(void 0);(function(e){var t=e.query,n=e.variables;return qo(this,undefined),n?{operation:t,variables:n}:{operation:t}}).bind(void 0);var Vo=function(e){var t=e.operation,n=e.variables;return qo(this,undefined),n?{query:t,variables:n}:{query:t}}.bind(void 0),Ko=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){return"function"==typeof Symbol},o=function(e){return r()&&Boolean(Symbol[e])},s=function(e){return o(e)?Symbol[e]:"@@"+e};r()&&!o("observable")&&(Symbol.observable=Symbol("observable"));var u=s("iterator"),c=s("observable"),a=s("species");function f(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function h(e){var t=e.constructor;return void 0!==t&&null===(t=t[a])&&(t=void 0),void 0!==t?t:w}function l(e){return e instanceof w}function d(e){d.log?d.log(e):setTimeout((function(){throw e}))}function v(e){Promise.resolve().then((function(){try{e()}catch(e){d(e)}}))}function p(e){var t=e._cleanup;if(void 0!==t&&(e._cleanup=void 0,t))try{if("function"==typeof t)t();else{var n=f(t,"unsubscribe");n&&n.call(t)}}catch(e){d(e)}}function y(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function b(e,t,n){e._state="running";var i=e._observer;try{var r=f(i,t);switch(t){case"next":r&&r.call(i,n);break;case"error":if(y(e),!r)throw n;r.call(i,n);break;case"complete":y(e),r&&r.call(i)}}catch(e){d(e)}"closed"===e._state?p(e):"running"===e._state&&(e._state="ready")}function g(e,t,n){if("closed"!==e._state){if("buffering"!==e._state)return"ready"!==e._state?(e._state="buffering",e._queue=[{type:t,value:n}],void v((function(){return function(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(b(e,t[n].type,t[n].value),"closed"!==e._state);++n);}}(e)}))):void b(e,t,n);e._queue.push({type:t,value:n})}}var m=function(){function e(t,n){i(this,e),this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var r=new k(this);try{this._cleanup=n.call(void 0,r)}catch(e){r.error(e)}"initializing"===this._state&&(this._state="ready")}return n(e,[{key:"unsubscribe",value:function(){"closed"!==this._state&&(y(this),p(this))}},{key:"closed",get:function(){return"closed"===this._state}}]),e}(),k=function(){function e(t){i(this,e),this._subscription=t}return n(e,[{key:"next",value:function(e){g(this._subscription,"next",e)}},{key:"error",value:function(e){g(this._subscription,"error",e)}},{key:"complete",value:function(){g(this._subscription,"complete")}},{key:"closed",get:function(){return"closed"===this._subscription._state}}]),e}(),w=t.Observable=function(){function e(t){if(i(this,e),!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}return n(e,[{key:"subscribe",value:function(e){return"object"==typeof e&&null!==e||(e={next:e,error:arguments[1],complete:arguments[2]}),new m(e,this._subscriber)}},{key:"forEach",value:function(e){var t=this;return new Promise((function(n,i){if("function"==typeof e)var r=t.subscribe({next:function(t){try{e(t,o)}catch(e){i(e),r.unsubscribe()}},error:i,complete:n});else i(new TypeError(e+" is not a function"));function o(){r.unsubscribe(),n()}}))}},{key:"map",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(h(this))((function(n){return t.subscribe({next:function(t){try{t=e(t)}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"filter",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");return new(h(this))((function(n){return t.subscribe({next:function(t){try{if(!e(t))return}catch(e){return n.error(e)}n.next(t)},error:function(e){n.error(e)},complete:function(){n.complete()}})}))}},{key:"reduce",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=h(this),i=arguments.length>1,r=!1,o=arguments[1],s=o;return new n((function(n){return t.subscribe({next:function(t){var o=!r;if(r=!0,!o||i)try{s=e(s,t)}catch(e){return n.error(e)}else s=t},error:function(e){n.error(e)},complete:function(){if(!r&&!i)return n.error(new TypeError("Cannot reduce an empty sequence"));n.next(s),n.complete()}})}))}},{key:"concat",value:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=h(this);return new r((function(t){var i=void 0,o=0;return function e(s){i=s.subscribe({next:function(e){t.next(e)},error:function(e){t.error(e)},complete:function(){o===n.length?(i=void 0,t.complete()):e(r.from(n[o++]))}})}(e),function(){i&&(i.unsubscribe(),i=void 0)}}))}},{key:"flatMap",value:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=h(this);return new n((function(i){var r=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return i.error(e)}var o=n.from(t).subscribe({next:function(e){i.next(e)},error:function(e){i.error(e)},complete:function(){var e=r.indexOf(o);e>=0&&r.splice(e,1),s()}});r.push(o)},error:function(e){i.error(e)},complete:function(){s()}});function s(){o.closed&&0===r.length&&i.complete()}return function(){r.forEach((function(e){return e.unsubscribe()})),o.unsubscribe()}}))}},{key:c,value:function(){return this}}],[{key:"from",value:function(t){var n="function"==typeof this?this:e;if(null==t)throw new TypeError(t+" is not an object");var i=f(t,c);if(i){var r=i.call(t);if(Object(r)!==r)throw new TypeError(r+" is not an object");return l(r)&&r.constructor===n?r:new n((function(e){return r.subscribe(e)}))}if(o("iterator")&&(i=f(t,u)))return new n((function(e){v((function(){if(!e.closed){var n=!0,r=!1,o=void 0;try{for(var s,u=i.call(t)[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c=s.value;if(e.next(c),e.closed)return}}catch(e){r=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}e.complete()}}))}));if(Array.isArray(t))return new n((function(e){v((function(){if(!e.closed){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()}}))}));throw new TypeError(t+" is not observable")}},{key:"of",value:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r="function"==typeof this?this:e;return new r((function(e){v((function(){if(!e.closed){for(var t=0;t<n.length;++t)if(e.next(n[t]),e.closed)return;e.complete()}}))}))}},{key:a,get:function(){return this}}]),e}();r()&&Object.defineProperty(w,Symbol("extensions"),{value:{symbol:c,hostReportError:d},configurable:!0})})).Observable,Xo=Sr(!0);_(_.P,"Array",{includes:function(e){return Xo(this,e,arguments.length>1?arguments[1]:void 0)}}),W("includes");var Yo=q("match"),Zo=function(e,t,n){if(s(i=t)&&(void 0!==(r=i[Yo])?r:"RegExp"==C(i)))throw TypeError("String#"+n+" doesn't accept regex!");var i,r;return String(x(e))},Qo=q("match");_(_.P+_.F*function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Qo]=!1,!"/./"[e](t)}catch(e){}}return!0}("includes"),"String",{includes:function(e){return!!~Zo(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}});var es=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};var ts=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){es(e,t,n[t])}))}return e};var ns=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r};var is=function(e,t){if(null==e)return{};var n,i,r=ns(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r},rs=Sr(!1),os=[].indexOf,ss=!!os&&1/[1].indexOf(1,-0)<0;_(_.P+_.F*(ss||!uo(os)),"Array",{indexOf:function(e){return ss?os.apply(this,arguments)||0:rs(this,e,arguments[1])}});var us=function(e){var t=e.activeObservers,n=e.canceledObservers,i=is(e,["activeObservers","canceledObservers"]);return qo(this,undefined),ts({},i,{isActive:!1,activeObservers:[],canceledObservers:vo(t).concat(vo(n))})}.bind(void 0),cs=function(e,t){var n=this;return qo(this,undefined),function(i){return qo(this,n),i[e]&&i[e](t)}.bind(this)}.bind(void 0),as=function(e){var t=e.name;return qo(this,undefined),"on".concat(t)}.bind(void 0),fs=function(e,t){return qo(this,undefined),e.forEach(cs(as(t),t.payload))}.bind(void 0),hs=function(e,t){return qo(this,undefined),fs(e.canceledObservers,t),e}.bind(void 0),ls="Abort",ds="Cancel",vs="Error",ps="Result",ys="Start",bs=function(e){return qo(this,undefined),{payload:e,name:ys}}.bind(void 0),gs=function(e){return qo(this,undefined),{payload:e,name:ps}}.bind(void 0),ms=function(e){return qo(this,undefined),{payload:e,name:vs}}.bind(void 0),ks=function(){return qo(this,undefined),{name:ds,payload:void 0}}.bind(void 0),ws=function(e){return qo(this,undefined),{payload:e,name:ls}}.bind(void 0),Es=function(e){return qo(this,undefined),ts({},e,{canceledObservers:[]})}.bind(void 0),js=function(e){return qo(this,undefined),e.canceledObservers.length>0?Es(hs(e,ks())):e}.bind(void 0),Ss=function(e,t,n){return qo(this,undefined),e.findIndex(Bi([t],n))}.bind(void 0),Os=function(e){var t=this;return qo(this,undefined),function(n){return qo(this,t),li(Ss(n,"request",e.request),[e],n)}.bind(this)}.bind(void 0),Ts=function(e){var t=this;return qo(this,undefined),function(n){return qo(this,t),ai(Ss(n,"request",e.request),1,n)}.bind(this)}.bind(void 0),_s=function(e,t){return qo(this,undefined),e.notifiers=t(e.notifiers),e}.bind(void 0),As=function(e,t){return qo(this,undefined),_s(e,Os(t)),t}.bind(void 0),Cs="canceling",Rs="pending",xs="sent",Ps="sending",Ls=function(e){var t=e.activeObservers,n=e.canceledObservers;return qo(this,undefined),vo(t).concat(vo(n))}.bind(void 0),Ms=function(e,t){return qo(this,undefined),fs(Ls(e),t),e}.bind(void 0),Ns=function(e,t,n){return qo(this,undefined),_s(e,Ts(Ms(t,ws(n))))}.bind(void 0),Is=function(e,t,n){return qo(this,undefined),e.find(Bi([t],n))}.bind(void 0),Ds=function(e,t){return qo(this,undefined),fs(e.activeObservers,t),e}.bind(void 0),Hs=function(e,t){return qo(this,undefined),Ds(e,gs(t))}.bind(void 0),Us=function(e){return qo(this,undefined),Ds(e,bs(e))}.bind(void 0),qs=function(e){return qo(this,undefined),js(ts({},e,{isActive:!0,requestStatus:Rs,subscriptionId:void 0}))}.bind(void 0),Fs=function(e,t){return qo(this,undefined),e.receive("ok",t.onSucceed).receive("error",t.onError).receive("timeout",t.onTimeout)}.bind(void 0),Bs=function(e,t){var n=this;return qo(this,undefined),function(i){var r=this;return qo(this,n),function(){qo(this,r);var n=Is(e.notifiers,"request",t);if(n){for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];i.apply(void 0,[e,n].concat(s))}}.bind(this)}.bind(this)}.bind(void 0),Js=function(e,t,n){return qo(this,undefined),Xi(Bs(e,t),n)}.bind(void 0),Gs=function(e,t,n,i){return qo(this,undefined),Fs(e.channel.push(i.name,i.payload),Js(e,t,n)),e}.bind(void 0),$s="doc",Ws="unsubscribe",zs=function(e){return qo(this,undefined),{payload:e,name:Ws}}.bind(void 0),Vs=function(e){return qo(this,undefined),{payload:e,name:$s}}.bind(void 0),Ks=function(e,t,n){var i=t.request;return qo(this,undefined),Gs(e,i,n,Vs(Vo(i)))}.bind(void 0),Xs=function(e,t){return qo(this,undefined),As(e,ts({},t,{requestStatus:Ps}))}.bind(void 0),Ys=function(e){return qo(this,undefined),new Error("request: ".concat(e))}.bind(void 0),Zs=function(e,t){return qo(this,undefined),Ds(t,ms(Ys("timeout")))}.bind(void 0),Qs=function(e,t,n){return qo(this,undefined),Ns(e,t,Ys(n))}.bind(void 0),eu=function(e){return qo(this,undefined),{onError:Qs,onSucceed:e,onTimeout:Zs}}.bind(void 0),tu=function(e,t,n){return qo(this,undefined),Ks(e,Xs(e,t),eu(n))}.bind(void 0),nu=function(e,t){return qo(this,undefined),_s(e,Ts(js(t)))}.bind(void 0),iu=function(e,t){return qo(this,undefined),fu(e,As(e,qs(t)))}.bind(void 0),ru=function(e){return qo(this,undefined),new Error("unsubscribe: ".concat(e))}.bind(void 0),ou={onError:function(e,t,n){return qo(this,undefined),Ns(e,t,ru(n))}.bind(void 0),onTimeout:function(e,t){return qo(this,undefined),hs(t,ms(ru("timeout")))}.bind(void 0),onSucceed:function(e,t){qo(this,undefined),t.isActive?iu(e,t):nu(e,t)}.bind(void 0)},su=function(e,t){var n=t.request,i=t.subscriptionId;return qo(this,undefined),Gs(e,n,ou,zs({subscriptionId:i}))}.bind(void 0),uu=function(e,t){return qo(this,undefined),su(e,As(e,ts({},t,{requestStatus:Cs})))}.bind(void 0),cu=function(e,t,n){var i=n.subscriptionId;qo(this,undefined);var r=As(e,ts({},t,{subscriptionId:i,requestStatus:xs}));r.isActive?Us(r):uu(e,r)}.bind(void 0),au=function(e,t,n){qo(this,undefined),n.errors?Qs(e,t,Jo(n.errors)):cu(e,t,n)}.bind(void 0),fu=function(e,t){return qo(this,undefined),tu(e,t,au)}.bind(void 0),hu=function(e,t){var n=t.payload;qo(this,undefined);var i=Is(e.notifiers,"subscriptionId",n.subscriptionId);i&&Hs(i,n.result)}.bind(void 0),lu=function(e){return qo(this,undefined),"subscription:data"===e.event}.bind(void 0),du=function(e,t){return qo(this,undefined),_s(e,Os(js(us(t))))}.bind(void 0),vu=function(e,t){return qo(this,undefined),t.requestStatus===Ps?du(e,t):e}.bind(void 0),pu=function(e,t){return qo(this,undefined),_s(e,Ts(js(us(t))))}.bind(void 0),yu=function(e,t){return qo(this,undefined),t.requestStatus===Rs?pu(e,t):vu(e,t)}.bind(void 0),bu=function(e,t){return qo(this,undefined),t.requestStatus===xs?uu(e,t):e}.bind(void 0),gu=function(e,t){return qo(this,undefined),bu(e,As(e,us(t)))}.bind(void 0),mu=function(e,t){return qo(this,undefined),t.requestStatus===Rs?pu(e,t):gu(e,t)}.bind(void 0),ku=function(e,t){return qo(this,undefined),"subscription"===t.operationType?mu(e,t):yu(e,t)}.bind(void 0),wu=function(e,t){return qo(this,undefined),t.isActive?ku(e,t):e}.bind(void 0),Eu=function(e,t){return qo(this,undefined),As(e,ts({},t,{requestStatus:xs}))}.bind(void 0),ju=function(e,t,n){return qo(this,undefined),_s(e,Ts(Hs(Eu(e,t),n)))}.bind(void 0),Su=function(e,t){return qo(this,undefined),tu(e,Us(t),ju)}.bind(void 0),Ou=function(e,t){qo(this,undefined),"subscription"===t.operationType?fu(e,t):Su(e,t)}.bind(void 0),Tu=function(e){return qo(this,undefined),new Error("channel join: ".concat(e))}.bind(void 0),_u=function(e,t){var n=this;return qo(this,undefined),e.notifiers.forEach(function(e){return qo(this,n),Ds(e,ms(Tu(t)))}.bind(this))}.bind(void 0),Au=function(e){var t=this;return qo(this,undefined),{onError:function(n){return qo(this,t),_u(e,n)}.bind(this),onSucceed:function(){var n=this;return qo(this,t),e.notifiers.forEach(function(t){return qo(this,n),Ou(e,t)}.bind(this))}.bind(this),onTimeout:function(){return qo(this,t),_u(e,"timeout")}.bind(this)}}.bind(void 0),Cu=function(e){return qo(this,undefined),Fs(e.channel.join(),Au(e)),e.channelJoinCreated=!0,e}.bind(void 0),Ru=function(e){var t=this;return qo(this,undefined),function(n){qo(this,t),lu(n)&&hu(e,n)}.bind(this)}.bind(void 0),xu=function(){return qo(this,undefined),new Error("connection: close")}.bind(void 0),Pu=function(e){return qo(this,undefined),Ms(e,ms(xu()))}.bind(void 0),Lu=function(e,t){return qo(this,undefined),_s(e,Ts(Pu(t)))}.bind(void 0),Mu=function(e,t){qo(this,undefined),"mutation"===t.operationType?Ns(e,t,xu()):As(e,qs(Pu(t)))}.bind(void 0),Nu=function(e){var t=this;return qo(this,undefined),function(n){qo(this,t),n.isActive?Mu(e,n):Lu(e,n)}.bind(this)}.bind(void 0),Iu=function(e){var t=this;return qo(this,undefined),function(){return qo(this,t),e.notifiers.forEach(Nu(e))}.bind(this)}.bind(void 0),Du=function(e){return qo(this,undefined),!e.channelJoinCreated&&e.notifiers.length>0}.bind(void 0),Hu=function(e){var t=this;return qo(this,undefined),function(){qo(this,t),Du(e)&&Cu(e)}.bind(this)}.bind(void 0),Uu=function(e){qo(this,undefined);var t={phoenixSocket:e,channel:e.channel("__absinthe__:control"),channelJoinCreated:!1,notifiers:[]};return e.onOpen(Hu(t)),e.onClose(Iu(t)),e.onMessage(Ru(t)),t}.bind(void 0),qu=function(e,t){var n=e.activeObservers,i=is(e,["activeObservers"]);return qo(this,undefined),ts({},i,{activeObservers:vo(n).concat([t]),isActive:!0})}.bind(void 0),Fu=function(e,t,n){return qo(this,undefined),As(e,qu(t,n))}.bind(void 0),Bu=function(e,t){return qo(this,undefined),{operationType:t,request:e,activeObservers:[],canceledObservers:[],isActive:!0,requestStatus:Rs,subscriptionId:void 0}}.bind(void 0),Ju=function(e){return qo(this,undefined),Bu(e,Wo(e.operation))}.bind(void 0),Gu=function(e){return qo(this,undefined),e.isActive?e:ts({},e,{isActive:!0})}.bind(void 0),$u=function(e){qo(this,undefined),e.phoenixSocket.isConnected()?Cu(e):e.phoenixSocket.connect()}.bind(void 0),Wu=function(e,t){qo(this,undefined);var n=Ju(t);return _s(e,Yn([n])),e.channelJoinCreated?Ou(e,n):$u(e),n}.bind(void 0),zu=function(e,t){return qo(this,undefined),As(e,Gu(t))}.bind(void 0),Vu=function(e,t){return qo(this,undefined),t.requestStatus===Ps?zu(e,js(t)):zu(e,t)}.bind(void 0),Ku=function(e,t){return qo(this,undefined),t.isActive?t:Vu(e,t)}.bind(void 0),Xu=function(e,t){qo(this,undefined);var n=Is(e.notifiers,"request",t);return n&&Ku(e,n)}.bind(void 0),Yu=function(e,t){return qo(this,undefined),Xu(e,t)||Wu(e,t)}.bind(void 0),Zu=function(e,t,n,i){var r=this,o=t.request;return qo(this,undefined),function(){qo(this,r);var t=Is(e.notifiers,"request",o);i(e,t,t?n:void 0)}.bind(this)}.bind(void 0),Qu=function(e,t){var n=this,i=e.operationType;return qo(this,undefined),function(e){qo(this,n),t.next(e),"subscription"!==i&&t.complete()}.bind(this)}.bind(void 0),ec=function(e,t,n){return qo(this,undefined),ts({},t,{onAbort:n.error.bind(n),onResult:Qu(e,n)})}.bind(void 0);(function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i.unsubscribe,o=is(i,["unsubscribe"]);return qo(this,undefined),new Ko(function(i){qo(this,n);var s=ec(t,o,i);return Fu(e,t,s),r&&Zu(e,t,s,r)}.bind(this))}).bind(void 0);var tc=function(e,t){return qo(this,undefined),ai(e.indexOf(t),1,e)}.bind(void 0),nc=function(e,t){var n=e.activeObservers,i=is(e,["activeObservers"]);return qo(this,undefined),ts({},i,{activeObservers:tc(n,t)})}.bind(void 0),ic=function(e,t){if(qo(this,undefined),e.activeObservers.includes(t))return e;throw new Error("Observer is not attached to notifier")}.bind(void 0),rc=function(e,t,n){return qo(this,undefined),_s(e,Os(nc(ic(t,n),n)))}.bind(void 0),oc=function(e,t,n){return qo(this,undefined),1===t.activeObservers.length?wu(e,t):rc(e,t,n)}.bind(void 0);(function(e,t,n){return qo(this,undefined),t.isActive?oc(e,t,n):e}).bind(void 0);const sc="undefined"!=typeof self?self:null,uc="undefined"!=typeof window?window:null,cc=sc||uc||void 0,ac=0,fc=1,hc=2,lc=3,dc="closed",vc="errored",pc="joined",yc="joining",bc="leaving",gc="phx_close",mc="phx_error",kc="phx_join",wc="phx_reply",Ec="phx_leave",jc=[gc,mc,kc,wc,Ec],Sc="longpoll",Oc="websocket";let Tc=e=>{if("function"==typeof e)return e;return function(){return e}};class _c{constructor(e,t,n,i){this.channel=e,this.event=t,this.payload=n||function(){return{}},this.receivedResp=null,this.timeout=i,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(e){this.timeout=e,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:e,response:t,ref:n}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}cancelRefEvent(){this.refEvent&&this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,(e=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=e,this.matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}trigger(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}class Ac{constructor(e,t,n){this.state=dc,this.topic=e,this.params=Tc(t||{}),this.socket=n,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new _c(this,kc,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new Lc((()=>{this.socket.isConnected()&&this.rejoin()}),this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError((()=>this.rejoinTimer.reset()))),this.stateChangeRefs.push(this.socket.onOpen((()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()}))),this.joinPush.receive("ok",(()=>{this.state=pc,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this.joinPush.receive("error",(()=>{this.state=vc,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()})),this.onClose((()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=dc,this.socket.remove(this)})),this.onError((e=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,e),this.isJoining()&&this.joinPush.reset(),this.state=vc,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()})),this.joinPush.receive("timeout",(()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new _c(this,Ec,Tc({}),this.timeout).send(),this.state=vc,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()})),this.on(wc,((e,t)=>{this.trigger(this.replyEventName(t),e)}))}join(e=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(e){this.on(gc,e)}onError(e){return this.on(mc,(t=>e(t)))}on(e,t){let n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}off(e,t){this.bindings=this.bindings.filter((n=>!(n.event===e&&(void 0===t||t===n.ref))))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,n=this.timeout){if(t=t||{},!this.joinedOnce)throw new Error(`tried to push '${e}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let i=new _c(this,e,(function(){return t}),n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}leave(e=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=bc;let t=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(gc,"leave")},n=new _c(this,Ec,Tc({}),e);return n.receive("ok",(()=>t())).receive("timeout",(()=>t())),n.send(),this.canPush()||n.trigger("ok",{}),n}onMessage(e,t,n){return t}isLifecycleEvent(e){return jc.indexOf(e)>=0}isMember(e,t,n,i){return this.topic===e&&(!i||i===this.joinRef()||!this.isLifecycleEvent(t)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:i}),!1))}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=yc,this.joinPush.resend(e))}trigger(e,t,n,i){let r=this.onMessage(e,t,n,i);if(t&&!r)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let o=this.bindings.filter((t=>t.event===e));for(let e=0;e<o.length;e++){o[e].callback(r,n,i||this.joinRef())}}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===dc}isErrored(){return this.state===vc}isJoined(){return this.state===pc}isJoining(){return this.state===yc}isLeaving(){return this.state===bc}}let Cc={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(e,t){if(e.payload.constructor===ArrayBuffer)return t(this.binaryEncode(e));{let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(n))}},decode(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));{let[n,i,r,o,s]=JSON.parse(e);return t({join_ref:n,ref:i,topic:r,event:o,payload:s})}},binaryEncode(e){let{join_ref:t,ref:n,event:i,topic:r,payload:o}=e,s=this.META_LENGTH+t.length+n.length+r.length+i.length,u=new ArrayBuffer(this.HEADER_LENGTH+s),c=new DataView(u),a=0;c.setUint8(a++,this.KINDS.push),c.setUint8(a++,t.length),c.setUint8(a++,n.length),c.setUint8(a++,r.length),c.setUint8(a++,i.length),Array.from(t,(e=>c.setUint8(a++,e.charCodeAt(0)))),Array.from(n,(e=>c.setUint8(a++,e.charCodeAt(0)))),Array.from(r,(e=>c.setUint8(a++,e.charCodeAt(0)))),Array.from(i,(e=>c.setUint8(a++,e.charCodeAt(0))));var f=new Uint8Array(u.byteLength+o.byteLength);return f.set(new Uint8Array(u),0),f.set(new Uint8Array(o),u.byteLength),f.buffer},binaryDecode(e){let t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this.decodePush(e,t,i);case this.KINDS.reply:return this.decodeReply(e,t,i);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,i)}},decodePush(e,t,n){let i=t.getUint8(1),r=t.getUint8(2),o=t.getUint8(3),s=this.HEADER_LENGTH+this.META_LENGTH-1,u=n.decode(e.slice(s,s+i));s+=i;let c=n.decode(e.slice(s,s+r));s+=r;let a=n.decode(e.slice(s,s+o));return s+=o,{join_ref:u,ref:null,topic:c,event:a,payload:e.slice(s,e.byteLength)}},decodeReply(e,t,n){let i=t.getUint8(1),r=t.getUint8(2),o=t.getUint8(3),s=t.getUint8(4),u=this.HEADER_LENGTH+this.META_LENGTH,c=n.decode(e.slice(u,u+i));u+=i;let a=n.decode(e.slice(u,u+r));u+=r;let f=n.decode(e.slice(u,u+o));u+=o;let h=n.decode(e.slice(u,u+s));u+=s;let l=e.slice(u,e.byteLength);return{join_ref:c,ref:a,topic:f,event:wc,payload:{status:h,response:l}}},decodeBroadcast(e,t,n){let i=t.getUint8(1),r=t.getUint8(2),o=this.HEADER_LENGTH+2,s=n.decode(e.slice(o,o+i));o+=i;let u=n.decode(e.slice(o,o+r));return o+=r,{join_ref:null,ref:null,topic:s,event:u,payload:e.slice(o,e.byteLength)}}};class Rc{constructor(e,t={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=t.timeout||1e4,this.transport=t.transport||cc.WebSocket||xc,this.defaultEncoder=Cc.encode.bind(Cc),this.defaultDecoder=Cc.decode.bind(Cc),this.closeWasClean=!1,this.unloaded=!1,this.binaryType=t.binaryType||"arraybuffer",this.transport!==xc?(this.encode=t.encode||this.defaultEncoder,this.decode=t.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),uc&&uc.addEventListener&&uc.addEventListener("unload",(e=>{this.conn&&(this.unloaded=!0,this.abnormalClose("unloaded"))})),this.heartbeatIntervalMs=t.heartbeatIntervalMs||3e4,this.rejoinAfterMs=e=>t.rejoinAfterMs?t.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4,this.reconnectAfterMs=e=>this.unloaded?100:t.reconnectAfterMs?t.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3,this.logger=t.logger||null,this.longpollerTimeout=t.longpollerTimeout||2e4,this.params=Tc(t.params||{}),this.endPoint=`${e}/${Oc}`,this.vsn=t.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new Lc((()=>{this.teardown((()=>this.connect()))}),this.reconnectAfterMs)}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let e=Pc.appendParams(Pc.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?`${this.protocol()}:${e}`:`${this.protocol()}://${location.host}${e}`}disconnect(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}connect(e){e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=Tc(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=e=>this.onConnError(e),this.conn.onmessage=e=>this.onConnMessage(e),this.conn.onclose=e=>this.onConnClose(e))}log(e,t,n){this.logger(e,t,n)}hasLogger(){return null!==this.logger}onOpen(e){let t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}onClose(e){let t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}onError(e){let t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}onMessage(e){let t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}onConnOpen(){this.hasLogger()&&this.log("transport",`connected to ${this.endPointURL()}`),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach((([,e])=>e()))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this.sendHeartbeat()),this.heartbeatIntervalMs))}teardown(e,t,n){if(!this.conn)return e&&e();this.waitForBufferDone((()=>{this.conn&&(t?this.conn.close(t,n||""):this.conn.close()),this.waitForSocketClosed((()=>{this.conn&&(this.conn.onclose=function(){},this.conn=null),e&&e()}))}))}waitForBufferDone(e,t=1){5!==t&&this.conn&&this.conn.bufferedAmount?setTimeout((()=>{this.waitForBufferDone(e,t+1)}),150*t):e()}waitForSocketClosed(e,t=1){5!==t&&this.conn&&this.conn.readyState!==lc?setTimeout((()=>{this.waitForSocketClosed(e,t+1)}),150*t):e()}onConnClose(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((([,t])=>t(e)))}onConnError(e){this.hasLogger()&&this.log("transport",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach((([,t])=>t(e)))}triggerChanError(){this.channels.forEach((e=>{e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(mc)}))}connectionState(){switch(this.conn&&this.conn.readyState){case ac:return"connecting";case fc:return"open";case hc:return"closing";default:return"closed"}}isConnected(){return"open"===this.connectionState()}remove(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter((t=>t.joinRef()!==e.joinRef()))}off(e){for(let t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter((([t])=>-1===e.indexOf(t)))}channel(e,t={}){let n=new Ac(e,t,this);return this.channels.push(n),n}push(e){if(this.hasLogger()){let{topic:t,event:n,payload:i,ref:r,join_ref:o}=e;this.log("push",`${t} ${n} (${o}, ${r})`,i)}this.isConnected()?this.encode(e,(e=>this.conn.send(e))):this.sendBuffer.push((()=>this.encode(e,(e=>this.conn.send(e)))))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}sendHeartbeat(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}abnormalClose(e){this.closeWasClean=!1,this.conn.readyState===fc&&this.conn.close(1e3,e)}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:n,payload:i,ref:r,join_ref:o}=e;r&&r===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.hasLogger()&&this.log("receive",`${i.status||""} ${t} ${n} ${r&&"("+r+")"||""}`,i);for(let e=0;e<this.channels.length;e++){const s=this.channels[e];s.isMember(t,n,i,o)&&s.trigger(n,i,r,o)}for(let t=0;t<this.stateChangeCallbacks.message.length;t++){let[,n]=this.stateChangeCallbacks.message[t];n(e)}}))}leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t.isJoined()||t.isJoining())));t&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${e}"`),t.leave())}}class xc{constructor(e){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=ac,this.poll()}normalizeEndpoint(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+Oc),"$1/"+Sc)}endpointURL(){return Pc.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(){this.close(),this.readyState=ac}ontimeout(){this.onerror("timeout"),this.closeAndRetry()}poll(){this.readyState!==fc&&this.readyState!==ac||Pc.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),(e=>{if(e){var{status:t,token:n,messages:i}=e;this.token=n}else var t=0;switch(t){case 200:i.forEach((e=>this.onmessage({data:e}))),this.poll();break;case 204:this.poll();break;case 410:this.readyState=fc,this.onopen(),this.poll();break;case 403:this.onerror(),this.close();break;case 0:case 500:this.onerror(),this.closeAndRetry();break;default:throw new Error(`unhandled poll status ${t}`)}}))}send(e){Pc.request("POST",this.endpointURL(),"application/json",e,this.timeout,this.onerror.bind(this,"timeout"),(e=>{e&&200===e.status||(this.onerror(e&&e.status),this.closeAndRetry())}))}close(e,t){this.readyState=lc,this.onclose()}}class Pc{static request(e,t,n,i,r,o,s){if(cc.XDomainRequest){let n=new XDomainRequest;this.xdomainRequest(n,e,t,i,r,o,s)}else{let u=new cc.XMLHttpRequest;this.xhrRequest(u,e,t,n,i,r,o,s)}}static xdomainRequest(e,t,n,i,r,o,s){e.timeout=r,e.open(t,n),e.onload=()=>{let t=this.parseJSON(e.responseText);s&&s(t)},o&&(e.ontimeout=o),e.onprogress=()=>{},e.send(i)}static xhrRequest(e,t,n,i,r,o,s,u){e.open(t,n,!0),e.timeout=o,e.setRequestHeader("Content-Type",i),e.onerror=()=>{u&&u(null)},e.onreadystatechange=()=>{if(e.readyState===this.states.complete&&u){let t=this.parseJSON(e.responseText);u(t)}},s&&(e.ontimeout=s),e.send(r)}static parseJSON(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}static serialize(e,t){let n=[];for(var i in e){if(!e.hasOwnProperty(i))continue;let r=t?`${t}[${i}]`:i,o=e[i];"object"==typeof o?n.push(this.serialize(o,r)):n.push(encodeURIComponent(r)+"="+encodeURIComponent(o))}return n.join("&")}static appendParams(e,t){if(0===Object.keys(t).length)return e;let n=e.match(/\?/)?"&":"?";return`${e}${n}${this.serialize(t)}`}}Pc.states={complete:4};class Lc{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}function Mc(e){if(Array.isArray(e)||(e=[e]),e.some((e=>"UNAUTHORIZED"===e.code)))return new TypeError("UNAUTHORIZED");if(e.some((e=>"BAD_CREDENTIALS"===e.code)))return new TypeError("BAD_CREDENTIALS");if(e.some((e=>"NOT_FOUND"===e.code)))return new RangeError("NOT_FOUND");const t=new Error("UNKNOWN");return t.errors=e,t}function Nc(e){const t=localStorage.getItem(function(e){return"#vault#"+e}(e));return null===t?null:(n=t,JSON.parse(function(e){let t="";const n=Ic.length;for(let i=0,r=e.length;i<r;++i)t+=String.fromCharCode(Ic.charCodeAt(i%n)^e.charCodeAt(i));return t}(n)));var n}const Ic=btoa(location.origin+navigator.userAgent+"VYNseA8BAfW9UIM");let Dc;async function Hc(){var e,t;void 0===Dc&&(Dc=await(e="wss://elliot.gigalixirapp.com/socket",t=Uc,new Promise(((n,i)=>{const r=new Rc(e,{params:t});r.onOpen((()=>n(Uu(r)))),r.onClose((()=>i(new TypeError("NETWORK_ERROR")))),r.connect()}))))}function Uc(){const e=Nc("token");return e?{token:e}:{}}window.API={fetch:function(e,t,n){return async function(e,t,n,{token:i}={}){const r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t,variables:n})};i&&(r.headers.Authorization="Bearer "+i);const o=await window.fetch(e,r),{data:s,errors:u}=await o.json();if(u)throw Mc(u);return s}("https://elliot.gigalixirapp.com/api",e,t,n)},connect:Hc,disconnect:async function(){if(void 0===Dc)return;await function(e){return new Promise(((t,n)=>{e.phoenixSocket.disconnect(t)}))}(Dc),Dc=void 0},send:async function(e,t){void 0===Dc&&await Hc();return function(e,t,n){return new Promise(((i,r)=>{const o=Yu(e,{operation:t,variables:n});Fu(e,o,{onResult:({data:e,errors:t})=>t?r(Mc(t)):i(e),onAbort:r,onError:()=>r(new TypeError("NETWORK_ERROR"))})}))}(Dc,e,t)}};
